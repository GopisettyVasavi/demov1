<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
 <title>Renaissance</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/x-icon" href="/img/renfavicon.ico">
<!-- CSS here -->
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/owl.carousel.min.css">
<link rel="stylesheet" href="css/magnific-popup.css">
<link rel="stylesheet" href="css/font-awesome.min.css">
<link rel="stylesheet" href="css/themify-icons.css">
<link rel="stylesheet" href="css/nice-select.css">
<link rel="stylesheet" href="css/flaticon.css">
<link rel="stylesheet" href="css/gijgo.css">
<link rel="stylesheet" href="css/animate.css">
<link rel="stylesheet" href="css/slicknav.css">
<link rel="stylesheet" href="css/style.css">

</head>
<!-- header-start -->
<header>
		<div class="col-xl-3 col-lg-2">
			<div class="logo">
				<a href="https://reninfo.com.au/"> <img
					src="/img/Renaissance_logo.png" alt="" height="50px" width="150px">

				</a>
			</div>
		</div>

</header>
<!-- header-end -->
	 <div class="bradcam_area bradcam_bg_1">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-12">
                            <div class="bradcam_text">
                                <h3>Change Password</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
<body>

<div class="col-lg-12" >
					<form class="form-contact contact_form"
						  id="passwordchangeform">
						<div class="row">
							<div class="col-sm-7">
								<div class="form-group" style="padding-left: 400px">
									<label for="name" style="font-weight:bold"> Login *</label> <input type="text" name="name"
										placeholder="Name" onfocus="this.placeholder = 'Login'"
										onblur="this.placeholder = 'Login'" 
										class="single-input" id="employeeName" required>
								</div>
							</div>
							</div>
							<div class="row">
							<div class="col-sm-7">
								<div class="form-group" style="padding-left: 400px">
									<label for="name" style="font-weight:bold">Old Password *</label> <input type="text"
										name="oldpassword" placeholder="Old Password"
										onfocus="this.placeholder = 'Old Password'"
										onblur="this.placeholder = 'Old Password'" id="oldpassword"
										class="single-input" required>
								</div>
							</div>
							</div>
							<div class="row">
							<div class="col-sm-7">
								<div class="form-group" style="padding-left: 400px">
									<label for="name" style="font-weight:bold">New Password *</label> <input type="text"
										name="newpassword" placeholder="New Password"
										onfocus="this.placeholder = 'New Password'"
										onblur="this.placeholder = 'New Password'" id="newpassword"
										class="single-input" required pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
										 title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters">
								</div>
							</div>
							</div>
							
							<div class="col-sm-12" style="padding-top: 10px"></div>
							<div class="col-sm-12" style="padding-left: 400px">
								
									<button type="submit"
										class="button button-contactForm boxed-btn" onclick="clickonsave()">Change Password</button>
										<input type="submit" formnovalidate name="cancel" value="Reset" class="button button-contactForm boxed-btn" > 
										<button type="submit"
										class="button button-contactForm boxed-btn" onclick="window.location = '/' ">Back</button>
								
							</div>
							
							
						
					</form>
					<div class="col-sm-12" style="padding-top: 10px"></div>
					
					<div id="feedback" style="padding-left: 400px; color: red"></div>
				</div>

 <script src="js/vendor/modernizr-3.5.0.min.js"></script>
        <script src="js/vendor/jquery-1.12.4.min.js"></script>
        <script src="js/popper.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/owl.carousel.min.js"></script>
        <script src="js/isotope.pkgd.min.js"></script>
        <script src="js/ajax-form.js"></script>
        <script src="js/waypoints.min.js"></script>
        <script src="js/jquery.counterup.min.js"></script>
        <script src="js/imagesloaded.pkgd.min.js"></script>
        <script src="js/scrollIt.js"></script>
        <script src="js/jquery.scrollUp.min.js"></script>
        <script src="js/wow.min.js"></script>
        <script src="js/nice-select.min.js"></script>
        <script src="js/jquery.slicknav.min.js"></script>
        <script src="js/jquery.magnific-popup.min.js"></script>
        <script src="js/plugins.js"></script>
        <script src="js/gijgo.min.js"></script>
    
        <!--contact js-->
        <script src="js/contact.js"></script>
        <script src="js/jquery.ajaxchimp.min.js"></script>
        <script src="js/jquery.form.js"></script>
        <script src="js/jquery.validate.min.js"></script>
        <script src="js/mail-script.js"></script>
    
        <script src="js/main.js"></script>

<script type="text/javascript">

function windowclose() {
	//window.open('','_parent','');
	window.close();
	}
$(document).ready(function(){ 
	$('#joiningdate').datepicker({
		iconsLibrary : 'fontawesome',
		icons : {
			rightIcon : '<span class="fa fa-caret-down"></span>'
		}
	});
});
	
 function clickonsave(){
	 $('#feedback').html("");
	  event.preventDefault();
	  $('#feedback').html("");
	  if($("#newpassword").val()==null ||$("#newpassword").val()==''
			  ||$("#oldpassword").val()==null ||$("#oldpassword").val()==''
			  ||$("#employeeName").val()==null || $("#employeeName").val()==''){
		 // alert("Please input all fields.");
		 $('#feedback').html("Validation error: Please input manadatory fields.");
	         
		  return false;
	  }
	  if($("#newpassword").val()==$("#oldpassword").val()){
		  $('#feedback').html("Validation error: Please enter different old and new passwords.");
		 // alert("Please enter different old and new passwords");
		  return false;
	  }
    var passwordchangeForm = {}
    passwordchangeForm["username"] = $("#employeeName").val();
    passwordchangeForm["newPassword"] = $("#newpassword").val();
    passwordchangeForm["oldPassword"] = $("#oldpassword").val();
   
    
   
    $.ajax({
        type: "POST",
        contentType: "application/json",
        url: "/passwordchange",
        data: JSON.stringify(passwordchangeForm),
        dataType: 'json',
        cache: false,
        timeout: 600000,
        success: function (data) {
        	alert("Password Changed Successfully...");
        	// $('#feedback').html("");
           
           // window.location='/profileparser'

        },
        error: function (e) {
        	
			//alert("error");
            var json = "<h4>Response Error: Employee and Password does not exists. Please input correct data.</h4>";
           
            $('#feedback').html(json);
            console.log("ERROR : ", e);
           // $("#btn-login").prop("disabled", false);

        }
    });
    
} </script>
<script src="js/idle_timeout.js"></script>
</body>
</html>